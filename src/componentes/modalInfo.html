<!-- Modal Mascota -->
<div class="modal fade" id="modalMascotaDetalle" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content border-0 shadow-lg">

      <div class="modal-header bg-primary text-white rounded-top-3">
        <h5 class="modal-title"><i class="fas fa-paw me-2"></i> Editar Mascota</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <div class="modal-body py-4">
        <form id="formEditarMascota" enctype="multipart/form-data" class="needs-validation" novalidate>
          <div class="row g-3">

            <!-- Nombre -->
            <div class="col-md-12">
              <div class="form-floating">
                <input type="text" class="form-control shadow-sm" id="nombre" name="nombre" placeholder=" " readonly>
                <label for="nombre"><i class="fas fa-tag me-2"></i>Nombre</label>
              </div>
            </div>

            <!-- Estado de Adopción-->
            <div class="col-md-6">
              <div class="form-floating" id="estadoObtenidoContainer">
                <select class="form-select shadow-sm" name="estadoObtenido" required>
                  <option value="No Disponible">No disponible</option>
                  <option value="Disponible">Disponible</option>
                </select>
                <label for="estadoObtenido"><i class="fas fa-heart me-2"></i>Estado de Adopción</label>
              </div>

              <!-- Adoptado por -->
              <div class="form-floating" id="adoptadoPorContainer" style="display: none;">
                <input type="text" class="form-control shadow-sm" id="adoptadoPor" name="adoptadoPor" placeholder=" " readonly>
                <label for="adoptadoPor"><i class="fas fa-user me-2"></i>Adoptado por</label>
              </div>
            </div>

            <!-- Fecha Ingreso -->
            <div class="col-md-6">
              <div class="form-floating">
                <input type="date" class="form-control shadow-sm" id="Ingreso" name="Ingreso" readonly>
                <label for="Ingreso"><i class="far fa-calendar-alt me-2"></i>Fecha de Ingreso</label>
              </div>
            </div>

            <!-- Solicitud Asociada -->
            <div class="col-md-6"> 
              <div class="form-floating">
                <div class="form-control shadow-sm" id="selectSolicitud" style="height: auto; min-height: 58px; overflow-y: auto;"></div>
                <label for="selectSolicitud"><i class="fas fa-tag me-2"></i>Solicitudes Asociadas</label>
              </div>
            </div>

            <!-- Reportes Asociados -->
            <div class="col-md-6"> 
              <div class="form-floating">
                <div class="form-control shadow-sm" id="selectReporte" style="height: auto; min-height: 58px; overflow-y: auto;"></div>
                <label for="selectReporte"><i class="fas fa-tag me-2"></i>Reportes Asociados</label>
              </div>
            </div>

            <div class="col-md-12 mt-4">
              <h6 class="border-bottom pb-2"><i class="fas fa-bone me-2"></i>Detalles de la Mascota</h6>
            </div>

            <!-- Línea y Estación -->
            <div class="col-md-6">
              <div class="form-floating">
                <select class="form-select shadow-sm" id="lineaMetro" name="lineaMetro" disabled>
                  <option value="L1">Línea 1</option>
                  <option value="L2">Línea 2</option>
                  <option value="L3">Línea 3</option>
                  <option value="L4">Línea 4</option>
                  <option value="L5">Línea 5</option>
                  <option value="L6">Línea 6</option>
                  <option value="L7">Línea 7</option>
                  <option value="L8">Línea 8</option>
                  <option value="L9">Línea 9</option>
                  <option value="LA">Línea A</option>
                  <option value="LB">Línea B</option>
                  <option value="L12">Línea 12</option>
                </select>
                <label for="lineaMetro"><i class="fas fa-subway me-2"></i>Línea</label>
              </div>
            </div>

            <div class="col-md-6">
              <div class="form-floating">
                  <input type="text" class="form-control shadow-sm" id="estacionMetro" name="estacion" readonly>
                  <label for="estacion"><i class="fas fa-map-marker-alt me-2"></i>Estación</label>
              </div>
            </div>

            <!-- Sexo y Edad -->
            <div class="col-md-6">
              <div class="form-floating">
                <select class="form-select shadow-sm" name="sexoObtenido" readonly>
                  <option value="" disabled selected>Seleccionar</option>
                  <option value="Macho">Macho</option>
                  <option value="Hembra">Hembra</option>
                </select>
                <label><i class="fas fa-venus-mars me-2"></i>Sexo</label>
              </div>
            </div>

            <div class="col-md-6">
              <div class="form-floating">
                <input type="number" class="form-control shadow-sm" name="edadObtenido" placeholder=" " required>
                <label><i class="fas fa-birthday-cake me-2"></i>Edad (años)</label>
              </div>
            </div>

            <!-- Tamaño y Raza -->
            <div class="col-md-6">
              <div class="form-floating">
                  <select class="form-select shadow-sm" name="tamanoObtenido" required>
                      <option value="" disabled selected>Seleccionar</option>
                      <option value="Pequeño">Pequeño</option>
                      <option value="Mediano">Mediano</option>
                      <option value="Grande">Grande</option>
                  </select>
                  <label><i class="fas fa-ruler-combined me-2"></i>Tamaño</label>
              </div>
            </div>

            <div class="col-md-6">
              <div class="form-floating">
                  <input type="text" class="form-control shadow-sm" id="raza" name="raza" readonly>
                  <label for="selectRaza"><i class="fas fa-dog me-2"></i>Raza</label>
              </div>
            </div>

            <!-- Características físicas -->
            <div class="col-md-12">
              <div class="form-floating">
                <textarea class="form-control shadow-sm" name="caractFisicaObtenido" placeholder=" " style="height: 100px"></textarea>
                <label><i class="fas fa-paint-brush me-2"></i>Características Físicas</label>
              </div>
            </div>

            <!-- Estado de Salud -->
            <div class="col-md-12">
              <div class="form-floating">
                <textarea class="form-control shadow-sm" name="estadoSaludObtenido" placeholder=" " style="height: 100px"></textarea>
                <label><i class="fas fa-heartbeat me-2"></i>Estado de Salud</label>
              </div>
            </div>

              <!-- Descripción -->
              <div class="col-md-12">
                  <div class="form-floating">
                      <textarea class="form-control shadow-sm" name="descripcionObtenido" placeholder=" " style="height: 100px"></textarea>
                      <label><i class="fas fa-align-left me-2"></i>Descripción</label>
                  </div>
              </div>

              <!-- Sección de Galería de Imágenes -->
              <div class="col-md-12 mt-4">
                <h6 class="border-bottom pb-2"><i class="fas fa-image me-2"></i>Galería de Imagenes</h6>
              </div>

              <div class="col-md-12 mt-4">
                  <label for="inputFotosMascota" class="btn btn-sm btn-success cursor-pointer">
                      <i class="fas fa-plus me-1"></i> Añadir imágenes
                      <input 
                          type="file" 
                          id="inputFotosMascota" 
                          name="fotosMascota[]" 
                          multiple 
                          accept="image/*, video/*" 
                          style="display: none;"
                          onchange="procesarNuevasImagenes(this)"
                      >
                  </label>
                  
                  <!-- Contenedor principal de la galería -->
                  <div class="gallery-container mb-3">
                      <div class="gallery-scroll" id="galeriaMascotaModal">
                          <!-- Las imágenes se insertarán aquí dinámicamente mediante JavaScript -->
                      </div>
                  </div>
                  
                  <!-- Modal de confirmación para eliminar -->
                  <div class="modal fade" id="confirmDeleteModal" tabindex="-1" aria-hidden="true">
                      <div class="modal-dialog modal-dialog-centered">
                          <div class="modal-content">
                              <div class="modal-header bg-danger text-white">
                                  <h5 class="modal-title">Confirmar eliminación</h5>
                                  <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                              </div>
                              <div class="modal-body">
                                  ¿Estás seguro que deseas eliminar esta imagen? Esta acción no se puede deshacer.
                              </div>
                              <div class="modal-footer">
                                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                                  <button type="button" class="btn btn-danger" id="confirmDeleteBtn">Eliminar</button>
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
          </div>

          <!-- Footer -->
          <div class="modal-footer border-0 bg-light rounded-bottom-3 mt-4">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
            <button type="submit" class="btn btn-primary">Guardar cambios</button>
          </div>
        </form>
      </div>

    </div>
  </div>
</div>

<!-- Modal Solicitud -->
<div class="modal fade" id="modalSolicitudDetalle" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content border-0 shadow-lg">

      <div class="modal-header bg-info text-white rounded-top-3">
        <h5 class="modal-title"><i class="fas fa-file-signature me-2"></i> Detalles de Solicitud</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <div class="modal-body py-4">
        <div class="row g-3">

          <!-- Información Básica -->
          <div class="col-md-6">
            <div class="form-floating">
              <input type="text" class="form-control shadow-sm" id="solicitudId" readonly>
              <label for="solicitudId"><i class="fas fa-hashtag me-2"></i>ID Solicitud</label>
            </div>
          </div>

          <div class="col-md-6">
            <div class="form-floating">
              <input type="date" class="form-control shadow-sm" id="fechaSolicitud" readonly>
              <label for="fechaSolicitud"><i class="far fa-calendar-alt me-2"></i>Fecha de Solicitud</label>
            </div>
          </div>

          <!-- Estado -->
          <div class="col-md-12">
            <div class="form-floating">
              <select class="form-select shadow-sm" id="estadoSolicitud">
                <option value="Pendiente">Pendiente</option>
                <option value="En proceso">En proceso</option>
                <option value="Aprobada">Aprobada</option>
                <option value="Rechazada">Rechazada</option>
              </select>
              <label for="estadoSolicitud"><i class="fas fa-tasks me-2"></i>Estado</label>
            </div>
          </div>

          <!-- Datos del Adoptante -->
          <div class="col-md-12 mt-4">
            <h6 class="border-bottom pb-2"><i class="fas fa-user-tie me-2"></i>Datos del Adoptante</h6>
          </div>

          <div class="col-md-6">
            <div class="form-floating">
              <input type="text" class="form-control shadow-sm" id="nombreAdoptante" readonly>
              <label for="nombreAdoptante"><i class="fas fa-user me-2"></i>Nombre</label>
            </div>
          </div>

          <div class="col-md-6">
            <div class="form-floating">
              <input type="tel" class="form-control shadow-sm" id="telefonoAdoptante" readonly>
              <label for="telefonoAdoptante"><i class="fas fa-phone me-2"></i>Teléfono</label>
            </div>
          </div>

          <div class="col-md-12">
            <div class="form-floating">
              <input type="email" class="form-control shadow-sm" id="correoAdoptante" readonly>
              <label for="correoAdoptante"><i class="fas fa-envelope me-2"></i>Correo Electrónico</label>
            </div>
          </div>

          <!-- Datos de la Mascota -->
          <div class="col-md-12 mt-4">
            <h6 class="border-bottom pb-2"><i class="fas fa-paw me-2"></i>Mascota Solicitada</h6>
          </div>

          <div class="col-md-6">
            <div class="form-floating">
              <input type="text" class="form-control shadow-sm" id="mascotaId" readonly>
              <label for="mascotaId"><i class="fas fa-hashtag me-2"></i>ID Mascota</label>
            </div>
          </div>

          <div class="col-md-6">
            <div class="form-floating">
              <input type="text" class="form-control shadow-sm" id="nombreMasc" readonly>
              <label for="nombreMasc"><i class="fas fa-tag me-2"></i>Nombre</label>
            </div>
          </div>

          <!-- Comentarios -->
          <div class="col-md-12 mt-3">
            <div class="form-floating">
              <textarea class="form-control shadow-sm" id="comentariosSolicitud" style="height: 100px" readonly></textarea>
              <label for="comentariosSolicitud"><i class="fas fa-comment me-2"></i>Comentarios</label>
            </div>
          </div>

          <!-- Documentos Adjuntos -->
          <div class="col-md-12 mt-4">
            <div class="d-flex justify-content-between align-items-center mb-2">
              <h6 class="mb-0"><i class="fas fa-file-pdf me-2"></i>Documentos Adjuntos</h6>
            </div>
            
            <div class="gallery-container mb-3">
              <div class="gallery-scroll" id="listaDocumentos">
                <!-- Los documentos PDF se cargarán aquí dinámicamente -->
                <div class="text-center py-3 text-muted documentos-placeholder">
                  <i class="fas fa-file-pdf fa-2x mb-2"></i>
                  <p>Cargando documentos...</p>
                </div>
              </div>
            </div>
          </div>

        </div>
      </div>

      <!-- Footer -->
      <div class="modal-footer border-0 bg-light rounded-bottom-3">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
        <button type="button" class="btn btn-primary" id="guardarEstadoSolicitud">Guardar Cambios</button>
      </div>

    </div>
  </div>
</div>